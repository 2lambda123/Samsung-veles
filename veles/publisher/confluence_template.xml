<ac:layout>
    <ac:layout-section ac:type="two_equal">
        <ac:layout-cell>
            <h1>Task Description</h1>

            <ac:structured-macro ac:name="section">
                <ac:rich-text-body>
                    {% if image is not none %}
                    <ac:structured-macro ac:name="column">
                        <ac:parameter ac:name="width">30%</ac:parameter>
                        <ac:rich-text-body>
                            <ac:image>
                                <ri:attachment ri:filename="{{ image["name"] }}"/>
                            </ac:image>
                        </ac:rich-text-body>
                    </ac:structured-macro>
                    <ac:structured-macro ac:name="column">
                        <ac:parameter ac:name="width">70%</ac:parameter>
                        <ac:rich-text-body>
                            <p>{{ description }}</p>
                            <h4>Workflow path</h4>{{ workflow_file }}
                            <h4>Configuration path</h4>{{ config_file }}
                        </ac:rich-text-body>
                    </ac:structured-macro>
                    {% else %}
                    <p>{{ description }}</p>
                    <h4>Workflow path</h4>{{ workflow_file }}
                    <h4>Configuration path</h4>{{ config_file }}
                    {% endif %}
                </ac:rich-text-body>
            </ac:structured-macro>
            <h1>Workflow</h1>
            <p>
                <ac:image ac:width="600">
                    <ri:attachment ri:filename="workflow.png"/>
                </ac:image>
            </p>
            {% if errors_pt is defined %}
            <h1>Results</h1>
            <table>
                <tbody>
                    <tr>
                        <th>set</th>
                        <th>accuracy</th>
                    </tr>
                    <tr>
                        <td>test</td>
                        <td>{{ errors_pt[0]|round(4) }}%</td>
                    </tr>
                    <tr>
                        <td>validation</td>
                        <td>{{ errors_pt[1]|round(4) }}%</td>
                    </tr>
                    <tr>
                        <td>train</td>
                        <td>{{ errors_pt[2]|round(4) }}%</td>
                    </tr>
                </tbody>
            </table>
            {% endif %}
            <h1>Source data</h1>
            <h4>Samples</h4><p>Total number: {{ total_samples }}</p>
            <table>
                <tbody>
                    <tr>
                        <th>&nbsp;</th>
                        <th>number of samples</th>
                    </tr>
                    <tr>
                        <td>test</td>
                        <td>{{ class_lengths[0] }}</td>
                    </tr>
                    <tr>
                        <td>validation</td>
                        <td>{{ class_lengths[1] }}</td>
                    </tr>
                    <tr>
                        <td>train</td>
                        <td>{{ class_lengths[2] }}</td>
                    </tr>
                </tbody>
            </table>
            <h4>Labels</h4><p>{{ labels }}</p>
            <table>
                <tbody>
                    <tr>
                        <th>set</th>
                        <th>label stats</th>
                    </tr>
                    <tr>
                        <td>test</td>
                        <td>{{ label_stats[0] }}</td>
                    </tr>
                    <tr>
                        <td>validation</td>
                        <td>{{ label_stats[1] }}</td>
                    </tr>
                    <tr>
                        <td>train</td>
                        <td>{{ label_stats[2] }}</td>
                    </tr>
                </tbody>
            </table>
            <h1>Run stats</h1>
            <table>
                <tbody>
                    <tr>
                        <th>&nbsp;</th>
                        <th>time of training</th>
                    </tr>
                    <tr>
                        <td>time</td>
                        <td>{{ days }} days, {{ hours }} hours, {{ mins }}
                            minutes, {{ secs|round(4) }} secs
                        </td>
                    </tr>
                    <tr>
                        <td>number of epochs</td>
                        <td>{{ epochs }}</td>
                    </tr>
                </tbody>
            </table>
            <table>
                <tbody>
                    <tr>
                        <th>unit class</th>
                        <th>run time</th>
                    </tr>
                    {% for unit, value in unit_run_times_by_class.items() %}
                    <tr>
                        <td>{{ unit }}</td>
                        <td>{{ value|round(4) }} secs
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <h1>Configuration</h1>
            <ac:structured-macro ac:name="noformat">
                <ac:plain-text-body>
                    <![CDATA[{{ config_text }}]]></ac:plain-text-body>
            </ac:structured-macro>
        </ac:layout-cell>
        <ac:layout-cell>
            <h1>Plots</h1>
            <p>
                {% for name in plots %}
                <ac:image ac:width="600">
                    <ri:attachment ri:filename="{{ name }}.png"/>
                </ac:image>
                <br/>
                {% endfor %}
            </p>
        </ac:layout-cell>
    </ac:layout-section>
</ac:layout>